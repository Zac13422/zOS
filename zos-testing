local answered = false
local answer = nil
if fs.exists("/bin/zsh") then
	while not answered do
		text.warn("You're about to reset the system.")
		text.warn("This will set the branch to testing.")
		write("Do you want to continue? (y/N) ")
		answer = read()
		if answer=="y" then
			text.info("Beginning system reset..")
		elseif answer=="n" or answer==""
			text.info("Reset cancelled.")
			return
		end
	end
else
	text.info("Gathering files from testing branch...")
end

if term.isColor() then term.setTextColor(colors.blue) end

function Done()
	if term.isColor() then term.setTextColor(colors.lime) end
	print("Done")
        if term.isColor() then term.setTextColor(colors.blue) end
end
 
function Download(path)
	write("[Info] Downloading "..path.."...")
	data = http.get("https://raw.githubusercontent.com/Zac13422/zOS/testing"..path)
        data = data.readAll()
        local file = fs.open(path, "w")
        file.write(data)
        file.close()
        Done() 
end
 

text.info("Deleting old files...")
fs.delete("/api/*")
fs.delete("/bin/*")
Done()s
      
Download("/.settings")
Download("/startup")
Download("/api/text")
Download("/api/system")
Download("/api/user")
Download("/bin/cd")
Download("/bin/cp")
Download("/bin/date")
Download("/bin/edit")
Download("/bin/hidden/login")
Download("/bin/logout")
Download("/bin/lua")
Download("/bin/mkdir")
Download("/bin/mv")
Download("/bin/passwd")
Download("/bin/pwd")
Download("/bin/reboot")
Download("/bin/rename")
Download("/bin/rm")
Download("/bin/shutdown")
Download("/bin/zpm")  
Download("/bin/zsh")
Download("/bin/useradd")

os.reboot()
